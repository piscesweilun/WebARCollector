/* (!!! 修正 v3.13 !!!) 
   我們必須強制 html 和 body 都是 100% 高度
*/
html, body {
    height: 100%;
    margin: 0;
    overflow: hidden; /* 隱藏滾動條 */

    /* --- 1. AnpanMan Logo 資料 (與您的邊框同步) --- */
    --anpanman-aspect-ratio: calc(790 / 257); /* 寬 / 高 */
    --top-border-height: 5vh;   /* <-- (!!注意!!) 匹配下方 'border-width' */
    --right-border-width: 4vw;  /* <-- (!!注意!!) 匹配下方 'border-width' */
    
    --logo-height: calc(var(--top-border-height) * 0.5);
    --logo-width: calc(var(--logo-height) * var(--anpanman-aspect-ratio));
    --logo-height-half: calc(var(--logo-height) / 2);
    --logo-overlap: 0.5vw;

    /* --- 2. (修改) Copyright 資料 --- */
    --copyright-aspect-ratio: calc(1631 / 220);
    
    /* (新) 這是 *實際* 的邊框尺寸 (僅用於定位) */
    --ACTUAL-bottom-border-height: 10vh; /* <-- (!!注意!!) 匹配下方 'border-width' */
    --ACTUAL-left-border-width: 5vw;   /* <-- (!!注意!!) 匹配下方 'border-width' */

   /* --- 3. (修正) Copyright 尺寸 --- */
    --copyright-width: 30vw; /* <-- (您可以修改此處來調整大小) */
    
    /* 高度自動計算 (寬度 / 長寬比) */
    --copyright-height: calc(var(--copyright-width) / var(--copyright-aspect-ratio));
    /* 高度一半 (輔助) */
    --copyright-height-half: calc(var(--copyright-height) / 2);
}

/* (修改) CSS 邊框覆蓋層 */
#border-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;  /* (保持這個設定) */
    height: 100%; /* (保持這個設定) */
    box-sizing: border-box;

    /* (!!!) 這是您 style.css 中最後的設定 */
    border-width: 5vh 4vw 8vh 5vw;
    border-style: solid;
    border-color: #2e4c9f;
    
    background: transparent;
    pointer-events: none;
    z-index: 55;
}


/* 左側縮圖容器 (修正) */
#thumbnails-container {
    position: absolute;
    left: calc(5vw + 10px); /* <-- 匹配 5vw 左邊框 */
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 56;
}

.thumbnail {
    width: 50px;
    height: 50px;
    border: 2px solid white;
    border-radius: 8px;
    opacity: 0.3;
    transition: opacity 0.3s;
}

/* 左上角 QR Code 容器 (修正) */
#qrcode-container {
    position: absolute;
    right: calc(4vw + 10px); /* <-- 匹配 4vw 右邊框 */
    top: calc(5vh + 10px);   /* <-- 匹配 5vh 上邊框 */
    background: white;
    padding: 10px;
    border-radius: 8px;
    z-index: 56;
    display: none;
}

/* (檔案末尾新增) 重置按鈕樣式 */
#reset-button {
    position: absolute;
    bottom: calc(10vh + 10px); /* <-- 匹配 10vh 下邊框 */
    right: calc(4vw + 10px);  /* <-- 匹配 4vw 右邊框 */
    z-index: 56;
    padding: 8px 12px;
    background-color: #ffffff;
    color: #cc0000;
    border: 2px solid #cc0000;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    font-size: 14px;
    display: none;
}

#reset-button:hover {
    background-color: #fbebeb;
}

/* (修正) 完成代碼容器樣式 */
#completion-code-container {
    position: absolute;
    z-index: 56;
    
    background-color: transparent;
    color: #FFFFFF;
    border: none;
    padding: 8px 12px;
    
    font-size: 16px;
    font-weight: bold;
    font-family: 'Courier New', Courier, monospace;
    display: none;
    
    /* Left: 與 Copyright 對齊 */
    left: var(--ACTUAL-left-border-width);
    
    /* Bottom: 位於 Copyright (bottom 2vw) 的上方 */
    bottom: calc(1.5vh + var(--copyright-height) + 0.3vh);
}

/* (修改) 麵包超人 Logo 樣式 */
#anpanman-logo {
    position: absolute;
    z-index: 56;
    pointer-events: none;

    width: var(--logo-width);
    height: var(--logo-height);
    padding-bottom: 0;

    background-image: url('../assets/ui/AnpanManLogo.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;

    /* Right: 切入右邊框 */
    right: calc(var(--right-border-width) - var(--logo-overlap));
    margin-right: 0;

    /* Top: 中心點對齊上方邊框下緣 */
    top: calc(var(--top-border-height) - var(--logo-height-half));
}

/* (修改) Copyright 圖片樣式 */
#copyright-image {
    position: absolute;
    z-index: 56;
    pointer-events: none;

    width: var(--copyright-width);
    height: var(--copyright-height);
    padding-bottom: 0;

    background-image: url('../assets/ui/CopyrightImage.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;

    /* Left: 對齊左側邊框的內緣 */
    left: var(--ACTUAL-left-border-width);
    
    /* Bottom: 靠近底部 (您可以自行調整 '2vw') */
    bottom: 2vw;
}

/* (修改) 相機按鈕樣式 */
#camera-button {
    position: absolute;
    z-index: 56;
    
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;

    width: 6vh;
    height: 6vh;
    
    left: 50%;
    
    /* 垂直置中於下方 10vh 邊框內 */
    bottom: calc((8vh / 2) - 3vh); /* 5vh - 30px */

    transform: translateX(-50%);
    display: none;
}

#camera-button img {
    width: 100%;
    height: 100%;
}

/* (!!! 新增 !!!) 地圖按鈕樣式 */
#map-button {
    position: absolute;
    z-index: 56; /* 與 camera-button 同層級 */
    
    /* 1. 外觀 */
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;

    /* 2. 尺寸 (與 camera-button 相同) */
    width: 6vh;
    height: 6vh;
    
    /* 3. 定位 (水平偏右) */
    /* 距離右邊框 4vw 再往左 80px (可調整) */
    right: calc(4vw + 80px);
    
    /* 4. 定位 (垂直與 camera-button 同高) */
    bottom: calc((8vh / 2) - 3vh); /* 5vh - 30px */

    /* 5. 圖片樣式 */
    display: block; /* 預設顯示 */
}

#map-button img {
    width: 100%;
    height: 100%;
}

/* (!!! 新增 !!!) 地圖容器樣式 */
#map-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9); /* 半透明黑底 */
    z-index: 50; /* 顯示在最上層 */
    
    /* Flexbox 讓地圖置中 */
    display: flex;
    justify-content: center;
    align-items: center;
}

#map-overlay img {
    /* (!!!) 
      您在 中對 #map-overlay img 做了設定，
      但這會影響到 POI 按鈕 內的圖片。
      我們只將這個規則套用到 .map-background
    */
}

/* 用於隱藏地圖的 helper class */
#map-overlay.hidden {
    display: none;
}


/* (!!!) 掃描框大小 (v3 邏輯) */
body div#mindar-ui-scanning {
    width: 15vw !important;
    height: 15vw !important;
    max-width: 15vw !important;
    max-height: 15vw !important;
}
body div#mindar-ui-scanning svg {
    width: 100% !important;
    height: 100% !important;
}

/* (!!! 新增 !!!) 地圖返回按鈕樣式 (圖片版) */
#map-back-button {
    position: absolute;
    bottom: 10%; /* 距離螢幕底部 30px (可調整) */
    left: 50%;
    transform: translateX(-50%); /* 水平置中 */
    
    z-index: 51; /* 高於地圖疊加層 (z-index: 50) */
    
    /* (!!! 修正 for image !!!) */
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;

    /* (!!!) 設定按鈕大小 (可調整，目前設為 60x60) */
    width: 60px;
    height: 60px;
}

#map-back-button img {
    width: 100%;
    height: 100%;
}

/* (!!! 新增 !!!) 地圖內容的相對容器 */
#map-content-container {
    position: relative; /* 關鍵：設為 POI 的定位基準 */
    max-width: 100%;
    max-height: 100%;
    display: block; /* 讓 <img> 正常顯示 */
    line-height: 0; /* 移除 <img> 下方多餘空間 */
}

/* (!!! 新增 !!!) 地圖底圖的樣式 */
.map-background {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    display: block; /* 移除 <img> 下方多餘空間 */
}

/* (!!! 新增 !!!) 地圖 POI 按鈕 */
.map-poi {
    position: absolute;
    
    /* (尺寸可調整) 這裡設為地圖寬度的 7.5% */
    width: 7.5%;
    height: auto;

    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    z-index: 52; /* 高於地圖，低於返回按鈕 */
    
    /* 讓 (top, left) 成為中心點 */
    transform: translate(-50%, -50%);
}

.map-poi img {
    width: 100%;
    height: auto;
}

/* (!!! 修正 !!!) 資訊面板疊加層 (Flexbox 置中) */
#info-panel-overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    z-index: 60;
    
    display: flex;
    justify-content: center;
    align-items: center;
}
#info-panel-overlay.hidden { 
    display: none;
}

/* (!!! 新增 !!!) 資訊內容的 "相對" 包裝器
   (這個 div 存在於您的 index.html 中)
*/
#info-panel-content {
    position: relative; /* (!!! 關鍵 !!!) 設為按鈕的定位基準 */
    
    /* 讓包裝器縮放以符合圖片 */
    display: inline-block; 
    line-height: 0; /* 移除 <img> 下方多餘空間 */
}


/* (!!! 修正 !!!) 資訊圖片 (現在由包裝器 控制大小) */
#info-panel-image {
    /* (!!!) 尺寸限制 (我們使用 vw/vh 確保它在螢幕內) */
    max-width: 90vw;  /* 螢幕寬度的 90% */
    max-height: 80vh; /* 螢幕高度的 80% */
    
    object-fit: contain;
    display: block; /* 移除 <img> 下方多餘空間 */
}

/* (!!! 修正 !!!) 資訊面板的關閉按鈕 */
#info-panel-close {
    position: absolute; /* (!!! 關鍵 !!!) 相對於 #info-panel-content 定位 */
    
    /* (!!! 關鍵修正 !!!) 
       定位在 *圖片容器* 的 25% / 5%
    */
    top: 16%;  /* <-- 往下 1/4 */
    right: 7%; /* <-- 往內偏一點 */
    
    z-index: 61;
    
    /* (樣式可調整) */
    width: 5vh;
    height: 5vh;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
}
#info-panel-close img {
    width: 100%;
    height: 100%;
}

/* (!!! 新增 !!!) 首次完成的慶祝訊息 */
#completion-celebration {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 100; /* 顯示在所有元素的最上層 */
    
    /* 外觀 */
    font-size: 32px; /* 大字體 */
    font-weight: bold;
    font-family: 'Courier New', Courier, monospace; /* 5. 保持字型 */
    color: white;
    text-shadow: 2px 2px 4px #000000;
    padding: 25px 40px;
    background-color: #2e4c9f; /* 和外框一樣的顏色 */
    border: 3px solid white;
    border-radius: 20px;
    
    pointer-events: none; /* 讓點擊可以穿透 */
}

#completion-celebration.hidden {
    display: none;
}